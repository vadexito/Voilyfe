<?php

namespace ZC\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * MemberRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class MemberRepository extends EntityRepository
{   
   public function getArrayPersonsByMemberId($member_id)
   {
       return $this ->createQueryBuilder('m')
                    ->join('m.persons','p')
                    ->addSelect('p.nickName')
                    ->addSelect('p.id id')
                    ->where('m.id = :id')
                    ->setParameter('id',$member_id)
                    ->getQuery()
                    ->getResult(\Doctrine\ORM\Query::HYDRATE_ARRAY);
   }
}